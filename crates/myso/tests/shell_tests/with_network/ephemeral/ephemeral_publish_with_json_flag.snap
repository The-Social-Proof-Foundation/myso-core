---
source: crates/myso/tests/shell_tests.rs
---
----- script -----
#!/usr/bin/env bash
# Copyright (c) Mysten Labs, Inc.
# SPDX-License-Identifier: Apache-2.0

# Test that --json flag outputs a proper json (without emitting any logs in stdout) 

myso client --client.config $CONFIG \
  test-publish --build-env testnet --pubfile-path Pub.local.toml a --json \
  > output.json

# Make sure the output is a valid json
jq -e . output.json >/dev/null || cat output.json;

----- results -----
success: true
exit_code: 0
----- stdout -----

----- stderr -----
INCLUDING DEPENDENCY MoveStdlib
INCLUDING DEPENDENCYMySo
BUILDING a
